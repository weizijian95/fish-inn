<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>1122å®¢å… - æ¸©é¦¨çš„å°å¤©åœ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- é…ç½®ä¸“å±æ¸©é¦¨è‰²è°ƒï¼ˆè“ç²‰ç³»ï¼‰ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fish: {
                            50: '#F0F7FF',
                            100: '#E0F0FF',
                            300: '#99CCF3',
                            400: '#66B3E8',
                        },
                        rabbit: {
                            50: '#FFF5F9',
                            100: '#FFEFF6',
                            300: '#FFC2D1',
                            400: '#FFB0C4',
                        }
                    },
                    fontFamily: {
                        cute: ['"Comic Sans MS"', '"Arial Rounded MT Bold"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style type="text/css">
        @layer utilities {
            .bg-pattern {
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffc2d1' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Ccircle cx='50' cy='10' r='2'/%3E%3Ccircle cx='10' cy='50' r='2'/%3E%3Ccircle cx='50' cy='50' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            }
            .float {
                animation: float 3s ease-in-out infinite;
            }
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
            .bounce-slow {
                animation: bounce-slow 2s ease-in-out infinite;
            }
            @keyframes bounce-slow {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-5px); }
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-fish-50 via-white to-rabbit-50 bg-pattern min-h-screen flex flex-col">
    <!-- é¡¶éƒ¨è£…é¥°æ¡ -->
    <div class="w-full h-1.5 bg-gradient-to-r from-fish-400 via-rabbit-300 to-fish-300"></div>

    <!-- ç”¨æˆ·çŠ¶æ€æ  -->
    <div class="container mx-auto px-6 py-4 max-w-3xl">
        <div class="flex justify-end">
            <!-- æœªç™»å½•çŠ¶æ€ -->
            <div id="notLoggedIn" class="hidden">
                <button onclick="goToLogin()" class="inline-flex items-center gap-2 bg-white/80 hover:bg-white text-fish-400 font-medium py-2 px-4 rounded-full transition-all duration-300 shadow-sm border border-fish-200">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>ç™»å½•/æ³¨å†Œ</span>
                </button>
            </div>
            
            <!-- å·²ç™»å½•çŠ¶æ€ -->
            <div id="loggedIn" class="hidden flex items-center gap-3">
                <div class="flex items-center gap-2 bg-white/80 rounded-full py-2 px-4 shadow-sm border border-fish-200">
                    <img id="userAvatar" src="" alt="å¤´åƒ" class="w-8 h-8 rounded-full">
                    <span id="userNickname" class="text-gray-700 font-medium"></span>
                </div>
                <button onclick="logout()" class="text-gray-500 hover:text-fish-400 transition-colors">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-grow container mx-auto px-6 py-10 max-w-3xl">
        <!-- å®¢å…æ ‡é¢˜ -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center justify-center w-28 h-28 rounded-full bg-gradient-to-br from-fish-100 to-rabbit-100 mb-4 shadow-lg">
                <i class="fas fa-couch text-6xl text-fish-400"></i>
            </div>
            <h1 class="text-[clamp(2rem,6vw,3rem)] font-cute font-bold bg-gradient-to-r from-fish-400 to-rabbit-400 bg-clip-text text-transparent mb-2">
                1122 å®¢å…
            </h1>
            <p class="text-gray-600 text-[clamp(1rem,3vw,1.2rem)]">
                â˜• æ¸©é¦¨çš„å°å¤©åœ° â˜•
            </p>
        </div>
        
        <!-- å®¢å…è£…é¥°åŒºåŸŸ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10 max-w-2xl mx-auto">
            <!-- ç•™è¨€æ¿åŒº -->
            <a href="1122-A-board.html" class="bg-gradient-to-br from-fish-100 to-fish-50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-fish-200 hover:shadow-2xl transition-all duration-300 transform hover:scale-105 cursor-pointer">
                <div class="text-center mb-4">
                    <i class="fas fa-message text-4xl text-fish-400 bounce-slow"></i>
                </div>
                <h3 class="text-xl font-cute font-bold text-gray-800 mb-2 text-center">æ¸©é¦¨ç•™è¨€æ¿</h3>
                <p class="text-gray-600 text-center text-sm">
                    ç•™ä¸‹ä½ çš„è¶³è¿¹å’Œå¿ƒæƒ… ğŸ’Œ
                </p>
            </a>

            <!-- ç”œç¾ç›¸å†ŒåŒº -->
            <a href="1122-A-album.html" class="bg-gradient-to-br from-rabbit-100 to-rabbit-50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-rabbit-200 hover:shadow-2xl transition-all duration-300 transform hover:scale-105 cursor-pointer">
                <div class="text-center mb-4">
                    <i class="fas fa-images text-4xl text-rabbit-400 bounce-slow" style="animation-delay: 0.3s"></i>
                </div>
                <h3 class="text-xl font-cute font-bold text-gray-800 mb-2 text-center">ç”œç¾ç›¸å†Œ</h3>
                <p class="text-gray-600 text-center text-sm">
                    è®°å½•ç¾å¥½ç¬é—´çš„ç›¸å†Œ ğŸ“·
                </p>
            </a>
        </div>

        <!-- æ¸©é¦¨æç¤ºå¡ç‰‡ -->
        <div class="bg-gradient-to-r from-fish-100/50 to-rabbit-100/50 backdrop-blur-sm rounded-2xl shadow-md p-6 mb-8 border border-fish-200/30">
            <div class="flex items-center justify-center gap-4 mb-3">
                <i class="fas fa-heart text-rabbit-400 text-2xl animate-pulse"></i>
                <h3 class="text-xl font-cute font-bold text-gray-800">å®¢å…å°è´´å£«</h3>
                <i class="fas fa-heart text-fish-400 text-2xl animate-pulse"></i>
            </div>
            <p class="text-gray-700 text-center text-[clamp(0.95rem,3vw,1.1rem)] leading-relaxed">
                è¿™é‡Œæ˜¯æˆ‘ä»¬æœ€æ¸©é¦¨çš„è§’è½ï¼Œæœ‰æˆ‘ä»¬ä¸€èµ·çœ‹è¿‡çš„ç”µå½±ï¼Œ<br class="hidden sm:block">
                ä¸€èµ·è¯»è¿‡çš„ä¹¦ï¼Œä¸€èµ·ç©è¿‡çš„æ¸¸æˆ...<br>
                <span class="text-fish-400 font-medium">æ„¿æ¯ä¸ªç¬é—´éƒ½è¢«æ¸©æŸ”ä»¥å¾… ğŸ’•</span>
            </p>
        </div>

        <!-- è£…é¥°å…ƒç´  -->
        <div class="flex justify-center gap-6 mb-8">
            <i class="fas fa-star text-fish-300 text-xl float"></i>
            <i class="fas fa-cloud text-rabbit-300 text-xl float" style="animation-delay: 0.5s"></i>
            <i class="fas fa-moon text-fish-400 text-xl float" style="animation-delay: 1s"></i>
            <i class="fas fa-star text-rabbit-400 text-xl float" style="animation-delay: 1.5s"></i>
        </div>
        
        <!-- å¯¼èˆªæŒ‰é’®ç»„ -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-6">
            <a href="1122.html" class="inline-flex items-center gap-2 bg-white hover:bg-fish-50 text-gray-800 font-medium py-3 px-6 rounded-full transition-all duration-300 shadow-sm border border-fish-100 hover:shadow-md">
                <i class="fas fa-door-closed"></i>
                <span>å›åˆ°é—¨å£</span>
            </a>
            <a href="index.html" class="inline-flex items-center gap-2 bg-gradient-to-r from-fish-300 to-rabbit-300 hover:from-fish-400 hover:to-rabbit-400 text-white font-medium py-3 px-6 rounded-full transition-all duration-300 shadow-md hover:shadow-lg">
                <i class="fas fa-home"></i>
                <span>è¿”å›å¤§å ‚</span>
            </a>
        </div>

        <!-- å‰å¾€å§å®¤æŒ‰é’® -->
        <div class="text-center">
            <button onclick="goToBedroom()" class="inline-flex items-center gap-2 bg-gradient-to-r from-purple-400 to-pink-400 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                <i class="fas fa-bed text-xl"></i>
                <span class="text-lg">å‰å¾€å§å®¤</span>
                <i class="fas fa-heart text-lg animate-pulse"></i>
            </button>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="py-4 text-center text-gray-500 text-sm">
        <p>ğŸŒŸ æˆ‘ä»¬çš„å°å®¢å…ï¼Œå……æ»¡çˆ±ä¸æ¸©æš– ğŸŒŸ</p>
    </footer>

    <!-- å¼•å…¥ç™»å½•æ¨¡å— -->
    <script src="auth-modal.js"></script>

    <script>
        // åˆå§‹åŒ–é¡µé¢
        window.addEventListener('load', () => {
            updateUserUI();
        });
        
        // ç”¨æˆ·ç®¡ç†å‡½æ•°
        function getUserInfo() {
            const userStr = localStorage.getItem('user');
            return userStr ? JSON.parse(userStr) : null;
        }
        
        function updateUserUI() {
            const user = getUserInfo();
            const notLoggedIn = document.getElementById('notLoggedIn');
            const loggedIn = document.getElementById('loggedIn');
            
            if (user) {
                notLoggedIn.classList.add('hidden');
                loggedIn.classList.remove('hidden');
                document.getElementById('userNickname').textContent = user.nickname;
                document.getElementById('userAvatar').src = user.avatar;
            } else {
                notLoggedIn.classList.remove('hidden');
                loggedIn.classList.add('hidden');
            }
        }
        
        function goToLogin() {
            openAuthModal('login');
        }
        
        function logout() {
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            updateUserUI();
        }

        // å‰å¾€å§å®¤åŠŸèƒ½
        function goToBedroom() {
            const user = getUserInfo();
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
            if (!user) {
                alert('è¯·å…ˆç™»å½•åå†å‰å¾€å§å®¤');
                goToLogin();
                return;
            }
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰å‰å¾€å§å®¤çš„æƒé™
            checkBedroomPermission(user.id);
        }

        // æ£€æŸ¥å§å®¤æƒé™
        async function checkBedroomPermission(userId) {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`https://fish-rabbit.site/api/exam/users/${userId}/permissions`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.permissions && data.permissions.includes('å‰å¾€1122å§å®¤')) {
                        // æœ‰æƒé™ï¼Œè·³è½¬åˆ°å§å®¤ï¼ˆæš‚æ—¶æ˜¾ç¤ºæç¤ºï¼‰
                        alert('æ­å–œï¼ä½ è·å¾—äº†å‰å¾€å§å®¤çš„æƒé™ï¼\nå§å®¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...');
                    } else {
                        // æ²¡æœ‰æƒé™ï¼Œæç¤ºå»520æˆ¿é—´
                        alert('ä½ éœ€è¦å»æˆ¿é—´å·ä¸º520çš„æˆ¿é—´å‚ä¸çˆ±çš„æµ‹è¯•ï¼Œé€šè¿‡æµ‹è¯•åå³å¯è·å¾—å‰å¾€å§å®¤çš„æƒé™ï¼');
                    }
                } else {
                    // æ²¡æœ‰æƒé™ï¼Œæç¤ºå»520æˆ¿é—´
                    alert('ä½ éœ€è¦å»æˆ¿é—´å·ä¸º520çš„æˆ¿é—´å‚ä¸çˆ±çš„æµ‹è¯•ï¼Œé€šè¿‡æµ‹è¯•åå³å¯è·å¾—å‰å¾€å§å®¤çš„æƒé™ï¼');
                }
            } catch (error) {
                console.error('æ£€æŸ¥æƒé™å¤±è´¥:', error);
                // æ²¡æœ‰æƒé™ï¼Œæç¤ºå»520æˆ¿é—´
                alert('ä½ éœ€è¦å»æˆ¿é—´å·ä¸º520çš„æˆ¿é—´å‚ä¸çˆ±çš„æµ‹è¯•ï¼Œé€šè¿‡æµ‹è¯•åå³å¯è·å¾—å‰å¾€å§å®¤çš„æƒé™ï¼');
            }
        }
    </script>
</body>
</html>

